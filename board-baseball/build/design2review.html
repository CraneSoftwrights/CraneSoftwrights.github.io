<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <title>Convert a Crane SVG design file into a review file</title><link rel="stylesheet" href="xslstyle.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><style type="text/css">
  /* put internal CSS styles here */

</style></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="d8e1"></a>Convert a Crane SVG design file into a review file</h2></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#d4e2">1. Convert a Crane SVG design file into a review file - design2review.xsl</a></span></dt><dd><dl><dt><span class="section"><a href="#d4e18">1.1. Invocation parameters and input file</a></span></dt><dt><span class="section"><a href="#d4e43">1.2. Convert all identified layers</a></span></dt></dl></dd><dt><span class="section"><a href="#index_">2. Index</a></span></dt></dl></div><p class="xsl-subtitle-specialization"><span class="bold"><strong>
   Available specialization parameter</strong></span></p><div class="itemizedlist"><ul type="disc" compact><li><span class="xsl-input-parameter-link"><a class="link" href="#d4e39"><span class="xsl-input-parameter-name"><code class="literal">c:top</code></span> (<span class="xsl-input-parameter-module-title">Convert a Crane SVG design file into a review file</span> - <span class="xsl-input-parameter-module-name"><code class="literal">design2review.xsl</code></span>)</a></span></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d4e2"></a>1.&nbsp;Convert a Crane SVG design file into a review file - <code class="literal">design2review.xsl</code></h2></div></div></div><p class="xsl-subtitle-filename">
              Filename: <code class="literal">design2review.xsl</code></p><div class="literallayout"><p><code class="literal">$Id$</code></p></div><p>
    This stylesheet is looking for cues that assemble Inkscape layers
    for review and modification for bursting into burn files.
  </p><pre class="programlisting">
BSD 3-Clause License

Copyright (c) 2023, Crane Softwrights Ltd.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright notice, this
   list of conditions and the following disclaimer.

2. Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution.

3. Neither the name of the copyright holder nor the names of its
   contributors may be used to endorse or promote products derived from
   this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.    
  </pre><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d4e18"></a>1.1.&nbsp;Invocation parameters and input file</h3></div></div></div><p>
    The input file has layers with layer titles that include layer tags
    of the form {name}:{distinction} that are combined into layers with titles
    that include the name of the output burst file, an equal sign, and tags of
    the form {name}:* that are combined into the output.    
  </p><p>
    The output file has only the combination layers with the identified layers
    combined. This is suitable for review, for modification of objects to
    paths, then bursting into burn files.
  </p><p>
    There are no invocation parameters.
  </p><p class="xsl-variable xsl-top-level"><a name="d4e39"></a><code class="literal"><span class="bold xsl-block-name">c:top</span> <span class="bold xsl-block-other">as="document-node()"</span> <span class="bold xsl-block-other">select="/"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:variable)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-variable"><p>Need to remember the input context for key() to work</p></span></blockquote></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d4e43"></a>1.2.&nbsp;Convert all identified layers</h3></div></div></div><p class="xsl-key xsl-top-level"><a name="d4e55"></a><code class="literal"><span class="bold xsl-block-name">c:build</span> <span class="bold xsl-block-match">match="g[matches(@inkscape:label,':[^\*]')]"</span> <span class="bold xsl-block-other">use="'__all__',               for $each in tokenize(@inkscape:label,'\s+')[matches(.,':[^\*]')]               return substring-before($each,':')"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:key)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-key"><p>Find all layers that are building blocks</p></span></blockquote></div><p class="xsl-key xsl-top-level"><a name="d4e63"></a><code class="literal"><span class="bold xsl-block-name">c:assemble</span> <span class="bold xsl-block-match">match="/*/g[tokenize(@inkscape:label,'\s+')='=']"</span> <span class="bold xsl-block-other">use="'__all__',tokenize(@inkscape:label,'\s+')[1]"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:key)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-key"><p>Find all layers that are assembled building blocks</p></span></blockquote></div><p class="xsl-template xsl-top-level"><a name="d4e71"></a><code class="literal"> <span class="bold xsl-block-match">match="/*"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>
    Can't get started
  </p></span></blockquote></div><p class="xsl-template xsl-top-level"><a name="d4e82"></a><code class="literal"> <span class="bold xsl-block-match">match="/svg"</span> <span class="bold xsl-block-other">priority="1"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>Get started</p></span></blockquote></div><p class="xsl-template xsl-top-level"><a name="d4e127"></a><code class="literal"><span class="bold xsl-block-name">c:addReferencedLayers</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>Recursively copy in referenced groups, checking for loops</p><p class="xsl-template-parameter">Parameter <code class="literal"><span class="bold xsl-template-parameter-name">c:layer</span> <span class="bold xsl-template-parameter-attributes">as="element(g)"</span> <span class="bold xsl-template-parameter-attributes">required="yes"</span></code></p><div class="blockquote"><blockquote class="blockquote"><p>The layer making the references</p></blockquote></div><p class="xsl-template-parameter">Parameter <code class="literal"><span class="bold xsl-template-parameter-name">c:pastLayers</span> <span class="bold xsl-template-parameter-attributes">as="element(g)*"</span></code></p><div class="blockquote"><blockquote class="blockquote"><p>A history of layers to prevent infinite loops and visibility</p></blockquote></div></span></blockquote></div><p class="xsl-template xsl-top-level"><a name="d4e209"></a><code class="literal"> <span class="bold xsl-block-match">match="@*|node()"</span> <span class="bold xsl-block-other">mode="#all"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>
    The identity template is used to copy all nodes not already being handled
    by other template rules.
  </p></span></blockquote></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="index_"></a>2.&nbsp;Index</h2></div></div></div><p><a class="link" href="#index-A"><span class="bold xsl-index-letter-title">A</span></a> <a class="link" href="#index-B"><span class="bold xsl-index-letter-title">B</span></a> <a class="link" href="#index-T"><span class="bold xsl-index-letter-title">T</span></a> </p><p><a name="index-A"></a><span class="bold xsl-index-letter-section">A</span></p><div class="itemizedlist"><ul type="disc" compact><li><span class="xsl-index-entry-link"><a class="link" href="#d4e127"><span class="xsl-index-top-level xsl-template"><span class="xsl-index-entry-name"><code class="literal">c:addReferencedLayers</code></span></span></a> (<span class="xsl-index-entry-module-title"><a class="link" href="#d4e43" title="1.2.&nbsp;Convert all identified layers">Convert all identified layers</a></span> - <span class="xsl-index-entry-module-name"><a class="link" href="#d4e2" title="1.&nbsp;Convert a Crane SVG design file into a review file - design2review.xsl"><code class="literal">design2review.xsl</code></a></span>)</span></li><li><span class="xsl-index-entry-link"><a class="link" href="#d4e63"><span class="xsl-index-top-level xsl-key"><span class="xsl-index-entry-name"><code class="literal">c:assemble</code></span></span></a> (<span class="xsl-index-entry-module-title"><a class="link" href="#d4e43" title="1.2.&nbsp;Convert all identified layers">Convert all identified layers</a></span> - <span class="xsl-index-entry-module-name"><a class="link" href="#d4e2" title="1.&nbsp;Convert a Crane SVG design file into a review file - design2review.xsl"><code class="literal">design2review.xsl</code></a></span>)</span></li></ul></div><p><a name="index-B"></a><span class="bold xsl-index-letter-section">B</span></p><div class="itemizedlist"><ul type="disc" compact><li><span class="xsl-index-entry-link"><a class="link" href="#d4e55"><span class="xsl-index-top-level xsl-key"><span class="xsl-index-entry-name"><code class="literal">c:build</code></span></span></a> (<span class="xsl-index-entry-module-title"><a class="link" href="#d4e43" title="1.2.&nbsp;Convert all identified layers">Convert all identified layers</a></span> - <span class="xsl-index-entry-module-name"><a class="link" href="#d4e2" title="1.&nbsp;Convert a Crane SVG design file into a review file - design2review.xsl"><code class="literal">design2review.xsl</code></a></span>)</span></li></ul></div><p><a name="index-T"></a><span class="bold xsl-index-letter-section">T</span></p><div class="itemizedlist"><ul type="disc" compact><li><span class="xsl-index-entry-link"><a class="link" href="#d4e39"><span class="xsl-index-top-level xsl-variable"><span class="xsl-index-entry-name"><code class="literal">c:top</code></span></span></a> (<span class="xsl-index-entry-module-title"><a class="link" href="#d4e18" title="1.1.&nbsp;Invocation parameters and input file">Invocation parameters and input file</a></span> - <span class="xsl-index-entry-module-name"><a class="link" href="#d4e2" title="1.&nbsp;Convert a Crane SVG design file into a review file - design2review.xsl"><code class="literal">design2review.xsl</code></a></span>)</span></li></ul></div></div></div></body></html>